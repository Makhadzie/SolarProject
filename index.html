<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <link rel="stylesheet" href="/public/styles/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

        <title>Solar Panel</title>
</head>

<body>
    <h1>Sign in</h1>
    <form class="signIn">
        <div class="formContainer">
            <label for="email">Email</label>
            <input class="form-control" id="email" type="email">
        </div>
        <div class="formContainer">
            <label for="email">Password</label>
            <input class="form-control" id="password" type="password">
        </div>
        <button type="submit" class="btn btn-primary">Sign in</button>
    </form>
    <p>Are you not registered? <a href="register.html">Register here</a> </p>

    <div class="alert alert-danger" role="alert">

    </div>
    <script type="module">
   
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-auth.js";
        const firebaseConfig = {
          apiKey: "AIzaSyAtZu_GY2oeN9GiuFW-cbJ2Rt2nkCtiGWQ",
          authDomain: "solar-project-62057.firebaseapp.com",
          projectId: "solar-project-62057",
          storageBucket: "solar-project-62057.appspot.com",
          messagingSenderId: "568424484873",
          appId: "1:568424484873:web:d13e94580f4eb1e98ca8d8"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        let form = document.querySelector('.signIn');
        let email = document.getElementById('email')
        let password = document.getElementById('password')
        let fail = document.querySelector('.alert-danger')

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            signInWithEmailAndPassword(auth, email.value, password.value)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    location.href = 'solar.html'
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    fail.style.display = 'block'
    fail.textContent = errorMessage;
  });
 
        })

      </script>
</body>

</html>